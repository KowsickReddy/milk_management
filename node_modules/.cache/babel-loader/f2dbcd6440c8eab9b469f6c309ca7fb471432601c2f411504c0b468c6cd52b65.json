{"ast":null,"code":"import _objectSpread from\"E:/Milk_management/milk-management-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'./App.css';// Security questions and answers\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const securityQuestions=[{question:\"Babu lakae Babu (fire symbol)\",answer:\"jaibabu\"},{question:\"Cult classic\",answer:\"khaleja\"},{question:\"Awaiting for?\",answer:\"varanasi\"},{question:\"Shaked thing\",answer:\"businessman\"}];function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[securityAnswer,setSecurityAnswer]=useState('');const[currentQuestion,setCurrentQuestion]=useState(null);const[usedQuestions,setUsedQuestions]=useState([]);const[showSecurityScreen,setShowSecurityScreen]=useState(true);const[customers,setCustomers]=useState([]);const[deliveries,setDeliveries]=useState([]);const[bills,setBills]=useState([]);const[payments,setPayments]=useState([]);// Track payments\nconst[longLeaves,setLongLeaves]=useState([]);// Track long leaves\nconst[longExtraMilk,setLongExtraMilk]=useState([]);// Track long extra milk\nconst[credits,setCredits]=useState([]);// Track customer credits\nconst[activeTab,setActiveTab]=useState('customers');const[selectedSession,setSelectedSession]=useState('morning');// Track delivery session\n// Security functions\nconst getRandomQuestion=()=>{const availableQuestions=securityQuestions.filter(q=>!usedQuestions.includes(q.question));if(availableQuestions.length===0){// If all questions have been used, reset the used list\nsetUsedQuestions([]);return securityQuestions[Math.floor(Math.random()*securityQuestions.length)];}const randomQuestion=availableQuestions[Math.floor(Math.random()*availableQuestions.length)];setCurrentQuestion(randomQuestion);setUsedQuestions(prev=>[...prev,randomQuestion.question]);return randomQuestion;};const handleSecurityAnswerChange=value=>{setSecurityAnswer(value.toLowerCase().trim());};const submitSecurityAnswer=()=>{if(!currentQuestion){getRandomQuestion();return;}const correctAnswer=currentQuestion.answer.toLowerCase();if(securityAnswer===correctAnswer){// Successfully answered, check if we've reached the required number of questions\nif(usedQuestions.length>=1){// Just one question for now\nsetIsAuthenticated(true);setShowSecurityScreen(false);}else{// Get another random question\nsetTimeout(()=>{setSecurityAnswer('');getRandomQuestion();},500);}}else{alert(\"Incorrect answer for: \\\"\".concat(currentQuestion.question,\"\\\"\"));// Reset and show a new random question\nsetSecurityAnswer('');setUsedQuestions([]);getRandomQuestion();}};const resetSecurity=()=>{setSecurityAnswer('');setCurrentQuestion(null);setUsedQuestions([]);setShowSecurityScreen(true);setTimeout(()=>{getRandomQuestion();},100);};// Initialize with a random question when security screen is shown\nuseEffect(()=>{if(showSecurityScreen&&!currentQuestion){setTimeout(()=>{getRandomQuestion();},100);}},[showSecurityScreen]);// Long leave functions\nconst addLongLeave=function(customerId,startDate,endDate){let reason=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';const customer=customers.find(c=>c.id===customerId);if(!customer)return;const newLongLeave={id:Date.now(),customer_id:customerId,customer_name:customer.name,start_date:startDate,end_date:endDate,reason:reason,created_at:new Date().toISOString()};setLongLeaves([...longLeaves,newLongLeave]);// Also add individual leave records for each day in the range\nconst start=new Date(startDate);const end=new Date(endDate);const date=new Date(start);while(date<=end){const dateString=date.toISOString().split('T')[0];markLeave(customer,dateString);date.setDate(date.getDate()+1);}alert(\"\".concat(customer.name,\" marked for leave from \").concat(startDate,\" to \").concat(endDate,\". Total days: \").concat(calculateDaysBetweenDates(startDate,endDate),\".\"));};// Long extra milk functions\nconst addLongExtraMilk=function(customerId,startDate,endDate,dailyExtraQty){let reason=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'';const customer=customers.find(c=>c.id===customerId);if(!customer)return;const newLongExtraMilk={id:Date.now(),customer_id:customerId,customer_name:customer.name,start_date:startDate,end_date:endDate,daily_extra_quantity:parseFloat(dailyExtraQty),reason:reason,created_at:new Date().toISOString()};setLongExtraMilk([...longExtraMilk,newLongExtraMilk]);// Also add individual extra milk records for each day in the range\nconst start=new Date(startDate);const end=new Date(endDate);const date=new Date(start);let totalExtraLiters=0;while(date<=end){const dateString=date.toISOString().split('T')[0];addExtraMilk(customer,dateString,dailyExtraQty);totalExtraLiters+=parseFloat(dailyExtraQty);date.setDate(date.getDate()+1);}alert(\"\".concat(customer.name,\" scheduled for extra \").concat(dailyExtraQty,\"L daily from \").concat(startDate,\" to \").concat(endDate,\". Total extra: \").concat(totalExtraLiters.toFixed(2),\"L.\"));};// Helper function to calculate days between two dates\nconst calculateDaysBetweenDates=(startDate,endDate)=>{const start=new Date(startDate);const end=new Date(endDate);const timeDifference=end.getTime()-start.getTime();return Math.ceil(timeDifference/(1000*3600*24))+1;// +1 to include both start and end dates\n};const[formData,setFormData]=useState({name:'',phone:'',address:'',daily_milk_quantity:'',milk_rate_per_liter:'',shift:'morning',// morning, evening, occasional\nstatus:'active'// active, inactive\n});const[editingId,setEditingId]=useState(null);const[selectedShift,setSelectedShift]=useState('all');// For delivery view\nconst[selectedDate,setSelectedDate]=useState(new Date().toISOString().split('T')[0]);// For delivery view\n// Load data from localStorage on component mount\nuseEffect(()=>{const savedCustomers=localStorage.getItem('milk_customers');const savedDeliveries=localStorage.getItem('milk_deliveries');const savedBills=localStorage.getItem('milk_bills');const savedPayments=localStorage.getItem('milk_payments');if(savedCustomers)setCustomers(JSON.parse(savedCustomers));if(savedDeliveries)setDeliveries(JSON.parse(savedDeliveries));if(savedBills)setBills(JSON.parse(savedBills));if(savedPayments)setPayments(JSON.parse(savedPayments));},[]);// Save data to localStorage whenever state changes\nuseEffect(()=>{localStorage.setItem('milk_customers',JSON.stringify(customers));},[customers]);useEffect(()=>{localStorage.setItem('milk_deliveries',JSON.stringify(deliveries));},[deliveries]);useEffect(()=>{localStorage.setItem('milk_bills',JSON.stringify(bills));},[bills]);useEffect(()=>{localStorage.setItem('milk_payments',JSON.stringify(payments));},[payments]);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=e=>{e.preventDefault();if(editingId){// Update existing customer\nsetCustomers(customers.map(c=>c.id===editingId?_objectSpread(_objectSpread({},formData),{},{id:editingId,updated_at:new Date().toISOString()}):c));setEditingId(null);}else{// Add new customer\nconst newCustomer=_objectSpread(_objectSpread({},formData),{},{id:Date.now(),// Simple ID generation\ndaily_milk_quantity:parseFloat(formData.daily_milk_quantity)||0,milk_rate_per_liter:parseFloat(formData.milk_rate_per_liter)||0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),default_milk_quantity:parseFloat(formData.daily_milk_quantity)||0// Store default quantity\n});// Check for duplicate phone numbers only if phone is provided\nif(formData.phone){const existingCustomer=customers.find(c=>c.phone===formData.phone);if(existingCustomer){alert('Phone number already exists!');return;}}setCustomers([...customers,newCustomer]);}// Reset form\nsetFormData({name:'',phone:'',address:'',daily_milk_quantity:'',milk_rate_per_liter:'',shift:'morning',status:'active'});};const handleEdit=customer=>{setFormData({name:customer.name,phone:customer.phone,address:customer.address,daily_milk_quantity:customer.daily_milk_quantity,milk_rate_per_liter:customer.milk_rate_per_liter,shift:customer.shift||'morning',status:customer.status||'active'});setEditingId(customer.id);};const handleDelete=id=>{if(window.confirm('Are you sure you want to delete this customer?')){setCustomers(customers.filter(c=>c.id!==id));// Also remove related deliveries and bills\nsetDeliveries(deliveries.filter(d=>d.customer_id!==id));setBills(bills.filter(b=>b.customer_id!==id));}};// Function to generate bill with balance calculation\nconst generateBill=customerId=>{const customer=customers.find(c=>c.id===customerId);if(!customer)return;// Calculate any outstanding balance from previous bills\nconst previousUnpaidBills=bills.filter(b=>b.customer_id===customerId&&!b.paid&&!(b.bill_month===new Date().getMonth()+1&&b.bill_year===new Date().getFullYear()));const outstandingBalance=previousUnpaidBills.reduce((sum,bill)=>sum+(bill.balance||bill.total_amount),0);const today=new Date();const newBill={id:Date.now(),customer_id:customerId,customer_name:customer.name,bill_month:today.getMonth()+1,bill_year:today.getFullYear(),total_quantity:customer.daily_milk_quantity*30,// Assuming 30 days\ntotal_amount:parseFloat((customer.daily_milk_quantity*30*customer.milk_rate_per_liter).toFixed(2)),bill_generated_at:today.toISOString(),sent_to_customer:false,paid:false,payment_date:null,amount_paid:0,balance:parseFloat((customer.daily_milk_quantity*30*customer.milk_rate_per_liter+outstandingBalance).toFixed(2)),outstanding_balance:outstandingBalance};setBills([...bills,newBill]);alert(\"Bill generated for \".concat(customer.name,\" - Amount: \\u20B9\").concat(newBill.balance.toFixed(2),\" (includes \\u20B9\").concat(outstandingBalance.toFixed(2),\" outstanding)\"));};// Function to handle bill payment with cross-month change handling\nconst handleBillPayment=(billId,amountPaid)=>{if(parseFloat(amountPaid)<=0){alert('Please enter a valid payment amount');return;}const bill=bills.find(b=>b.id===billId);if(!bill)return;const paymentAmount=parseFloat(amountPaid);const currentBalance=bill.balance;const changeAmount=paymentAmount-currentBalance;if(paymentAmount>=currentBalance){// Full payment or overpayment\nconst newPayment={id:Date.now(),bill_id:billId,customer_id:bill.customer_id,amount_paid:currentBalance,// Only pay the balance amount\nchange_given:changeAmount,// Show the change given\npayment_date:new Date().toISOString(),payment_method:'cash',created_at:new Date().toISOString(),is_partial:false,is_full_with_change:changeAmount>0,change_amount:changeAmount};setPayments([...payments,newPayment]);// Update the current bill as fully paid\nconst updatedBill=_objectSpread(_objectSpread({},bill),{},{paid:true,amount_paid:(bill.amount_paid||0)+currentBalance,balance:0,payment_date:new Date().toISOString(),updated_at:new Date().toISOString(),last_payment_change:changeAmount>0?changeAmount:0// Track change given\n});setBills(bills.map(b=>b.id===billId?updatedBill:b));// If there's overpayment (change), apply it to the next month's bill\nif(changeAmount>0){applyChangeToNextMonthBill(bill.customer_id,changeAmount,bill.bill_month,bill.bill_year);alert(\"Bill paid successfully! Change given: \\u20B9\".concat(changeAmount.toFixed(2),\" (applied to next month's bill)\"));}else{alert('Bill paid successfully!');}}else{// Partial payment\nconst newAmountPaid=(bill.amount_paid||0)+paymentAmount;const newBalance=parseFloat((currentBalance-paymentAmount).toFixed(2));const newPayment={id:Date.now(),bill_id:billId,customer_id:bill.customer_id,amount_paid:paymentAmount,change_given:0,// No change for partial payments\npayment_date:new Date().toISOString(),payment_method:'partial',created_at:new Date().toISOString(),is_partial:true};setPayments([...payments,newPayment]);// Update the bill with new balance\nconst updatedBill=_objectSpread(_objectSpread({},bill),{},{amount_paid:newAmountPaid,balance:newBalance,payment_date:new Date().toISOString(),updated_at:new Date().toISOString()});setBills(bills.map(b=>b.id===billId?updatedBill:b));alert(\"Partial payment of \\u20B9\".concat(paymentAmount.toFixed(2),\" received. Remaining balance: \\u20B9\").concat(newBalance.toFixed(2)));}};// Function to apply change to next month's bill\nconst applyChangeToNextMonthBill=(customerId,changeAmount,currentMonth,currentYear)=>{// Calculate next month and year\nlet nextMonth=currentMonth+1;let nextYear=currentYear;if(nextMonth>12){nextMonth=1;nextYear=currentYear+1;}// Find the next month's bill for this customer\nconst nextMonthBill=bills.find(b=>b.customer_id===customerId&&b.bill_month===nextMonth&&b.bill_year===nextYear);if(nextMonthBill&&!nextMonthBill.paid){// Apply the change to reduce the next month's balance\nconst newBalance=Math.max(0,nextMonthBill.balance-changeAmount);const newTotalAmount=Math.max(0,nextMonthBill.total_amount-changeAmount);setBills(bills.map(b=>b.id===nextMonthBill.id?_objectSpread(_objectSpread({},b),{},{balance:newBalance,total_amount:newTotalAmount,updated_at:new Date().toISOString(),credit_applied:(b.credit_applied||0)+changeAmount}):b));// Create a credit application record\nconst creditRecord={id:Date.now(),bill_id:nextMonthBill.id,customer_id:customerId,credit_amount:changeAmount,applied_date:new Date().toISOString(),description:\"Credit from overpayment in \".concat(getMonthName(currentMonth),\" \").concat(currentYear)};setCredits(prev=>[...prev,creditRecord]);}else{// If no next month bill exists, create a credit record for future use\nconst creditRecord={id:Date.now(),customer_id:customerId,credit_amount:changeAmount,applied_date:new Date().toISOString(),description:\"Credit from overpayment in \".concat(getMonthName(currentMonth),\" \").concat(currentYear),status:'pending'// Will be applied when next bill is generated\n};setCredits(prev=>[...prev,creditRecord]);}};// Helper function to get month name\nconst getMonthName=monthNum=>{const monthNames=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];return monthNames[monthNum-1]||'';};// Function to add customer credit\nconst addCustomerCredit=(customerId,amount)=>{// Find the customer\nconst customer=customers.find(c=>c.id===customerId);if(!customer)return;// Update customer with credit information\nsetCustomers(customers.map(c=>c.id===customerId?_objectSpread(_objectSpread({},c),{},{credit_balance:(c.credit_balance||0)+amount,last_credit_added:new Date().toISOString()}):c));};// Function to apply overpayment to customer's future bills\nconst applyOverpaymentToCustomerBills=(customerId,overpaymentAmount,currentBillId)=>{// Find unpaid bills for this customer (excluding current bill)\nconst customerUnpaidBills=bills.filter(b=>b.customer_id===customerId&&!b.paid&&b.id!==currentBillId).sort((a,b)=>new Date(a.bill_generated_at)-new Date(b.bill_generated_at));// Sort by oldest first\nlet remainingOverpayment=overpaymentAmount;for(const bill of customerUnpaidBills){if(remainingOverpayment<=0)break;const amountToApply=Math.min(remainingOverpayment,bill.balance);const newBillBalance=parseFloat((bill.balance-amountToApply).toFixed(2));const isFullyPaid=newBillBalance<=0;// Create a payment record for the applied amount\nconst appliedPayment={id:Date.now()+Math.random(),// Unique ID\nbill_id:bill.id,customer_id:customerId,amount_paid:amountToApply,change_given:0,// No change for applied payments\npayment_date:new Date().toISOString(),payment_method:'credit_from_overpayment',created_at:new Date().toISOString(),is_credit_from_overpayment:true,original_overpayment_source:currentBillId};setPayments(prev=>[...prev,appliedPayment]);// Update the bill\nsetBills(prevBills=>prevBills.map(b=>b.id===bill.id?_objectSpread(_objectSpread({},b),{},{paid:isFullyPaid,amount_paid:(b.amount_paid||0)+amountToApply,balance:newBillBalance,payment_date:isFullyPaid?new Date().toISOString():b.payment_date,updated_at:new Date().toISOString()}):b));remainingOverpayment=parseFloat((remainingOverpayment-amountToApply).toFixed(2));}if(remainingOverpayment>0){// If there's still overpayment left, create a credit for the customer\nalert(\"\\u20B9\".concat(remainingOverpayment.toFixed(2),\" overpayment has been credited to customer account for future bills.\"));}};// Function to handle partial payment with overpayment support\nconst handlePartialPayment=function(billId,amountPaid){let changeGiven=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(parseFloat(amountPaid)<=0){alert('Please enter a valid payment amount');return;}const bill=bills.find(b=>b.id===billId);if(!bill)return;const paymentAmount=parseFloat(amountPaid);const overpayment=paymentAmount-bill.balance;if(overpayment>0){// Handle overpayment by applying excess to future bills\nalert(\"Overpayment of \\u20B9\".concat(overpayment.toFixed(2),\" detected. This will be applied to future bills.\"));// Apply the full balance to current bill\nhandleBillPayment(billId,bill.balance,changeGiven);// Apply remaining amount to future bills\napplyOverpaymentToCustomerBills(bill.customer_id,overpayment);}else{// Regular payment\nhandleBillPayment(billId,amountPaid,changeGiven);}};// Function to apply overpayment to future bills (deprecated - use applyOverpaymentToCustomerBills instead)\nconst applyOverpaymentToFutureBills=(customerId,overpaymentAmount)=>{// This function is deprecated. Use applyOverpaymentToCustomerBills instead.\n};// Function to get customers by shift\nconst getCustomersByShift=shift=>{if(shift==='all'){return customers.filter(c=>c.status==='active');}return customers.filter(c=>c.shift===shift&&c.status==='active');};// Function to handle delivery marking with session\nconst markDelivery=function(customer,date,deliveredQty){let session=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'morning';const existingDelivery=deliveries.find(d=>d.customer_id===customer.id&&d.date===date&&d.session===session);if(existingDelivery){// Update existing delivery\nsetDeliveries(deliveries.map(d=>d.id===existingDelivery.id?_objectSpread(_objectSpread({},d),{},{delivered_quantity:deliveredQty,delivered:true,leave:false,session:session}):d));}else{// Create new delivery record\nconst newDelivery={id:Date.now(),customer_id:customer.id,customer_name:customer.name,date:date,session:session,// Add session information\nscheduled_quantity:customer.default_milk_quantity,delivered_quantity:deliveredQty,delivered:true,leave:false,delivery_shift:customer.shift,created_at:new Date().toISOString()};setDeliveries([...deliveries,newDelivery]);}};// Function to mark a leave with session\nconst markLeave=function(customer,date){let session=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'morning';const existingDelivery=deliveries.find(d=>d.customer_id===customer.id&&d.date===date&&d.session===session);if(existingDelivery){// Update existing delivery as leave\nsetDeliveries(deliveries.map(d=>d.id===existingDelivery.id?_objectSpread(_objectSpread({},d),{},{delivered:false,leave:true,session:session}):d));}else{// Create new delivery record marked as leave\nconst newDelivery={id:Date.now(),customer_id:customer.id,customer_name:customer.name,date:date,session:session,// Add session information\nscheduled_quantity:customer.default_milk_quantity,delivered_quantity:0,delivered:false,leave:true,delivery_shift:customer.shift,created_at:new Date().toISOString()};setDeliveries([...deliveries,newDelivery]);}};// Function to handle extra milk addition\nconst addExtraMilk=(customer,date,extraQty)=>{const existingDelivery=deliveries.find(d=>d.customer_id===customer.id&&d.date===date);let newDeliveredQty=customer.default_milk_quantity+parseFloat(extraQty||0);if(existingDelivery){// Update existing delivery with extra milk\nsetDeliveries(deliveries.map(d=>d.id===existingDelivery.id?_objectSpread(_objectSpread({},d),{},{delivered_quantity:newDeliveredQty,delivered:true,leave:false}):d));}else{// Create new delivery record with extra milk\nconst newDelivery={id:Date.now(),customer_id:customer.id,customer_name:customer.name,date:date,scheduled_quantity:customer.default_milk_quantity,delivered_quantity:newDeliveredQty,delivered:true,leave:false,delivery_shift:customer.shift,extra_milk:parseFloat(extraQty||0)};setDeliveries([...deliveries,newDelivery]);}};// Function to override default quantity for a specific day\nconst overrideDefaultQuantity=(customer,date,newQty)=>{const existingDelivery=deliveries.find(d=>d.customer_id===customer.id&&d.date===date);if(existingDelivery){// Update existing delivery with overridden quantity\nsetDeliveries(deliveries.map(d=>d.id===existingDelivery.id?_objectSpread(_objectSpread({},d),{},{delivered_quantity:parseFloat(newQty),delivered:true,leave:false}):d));}else{// Create new delivery record with overridden quantity\nconst newDelivery={id:Date.now(),customer_id:customer.id,customer_name:customer.name,date:date,scheduled_quantity:customer.default_milk_quantity,delivered_quantity:parseFloat(newQty),delivered:true,leave:false,delivery_shift:customer.shift,quantity_overridden:true};setDeliveries([...deliveries,newDelivery]);}};// Get deliveries for selected date and shift\nconst getDeliveriesForDate=()=>{let filteredDeliveries=deliveries.filter(d=>d.date===selectedDate);if(selectedShift!=='all'){filteredDeliveries=filteredDeliveries.filter(d=>d.delivery_shift===selectedShift);}return filteredDeliveries;};if(showSecurityScreen){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{className:\"security-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"security-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Access Verification\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Security Question:\"}),/*#__PURE__*/_jsx(\"h3\",{children:(currentQuestion===null||currentQuestion===void 0?void 0:currentQuestion.question)||'Loading...'}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your answer\",value:securityAnswer,onChange:e=>handleSecurityAnswerChange(e.target.value),onKeyPress:e=>{if(e.key==='Enter'){submitSecurityAnswer();}},autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{onClick:submitSecurityAnswer,children:\"Verify Access\"}),/*#__PURE__*/_jsx(\"p\",{className:\"security-hint\",children:\"Answer correctly to access the application\"})]})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dairy Management System\"}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:resetSecurity,children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:activeTab==='customers'?'active':'',onClick:()=>setActiveTab('customers'),children:\"Customers\"}),/*#__PURE__*/_jsx(\"button\",{className:activeTab==='deliveries'?'active':'',onClick:()=>setActiveTab('deliveries'),children:\"Deliveries\"}),/*#__PURE__*/_jsx(\"button\",{className:activeTab==='bills'?'active':'',onClick:()=>setActiveTab('bills'),children:\"Bills\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[activeTab==='customers'&&/*#__PURE__*/_jsxs(\"div\",{className:\"customers-section\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"customer-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingId?'Edit Customer':'Add New Customer'}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\" \",value:formData.name,onChange:handleChange,required:true,className:formData.name?'has-value':''}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Customer Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",placeholder:\" \",value:formData.phone,onChange:handleChange,className:formData.phone?'has-value':''}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"Phone Number (Optional)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"textarea\",{name:\"address\",placeholder:\" \",value:formData.address,onChange:handleChange,required:true,className:formData.address?'has-value':''}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",children:\"Address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"daily_milk_quantity\",placeholder:\" \",value:formData.daily_milk_quantity,onChange:handleChange,step:\"0.01\",min:\"0\",className:formData.daily_milk_quantity?'has-value':''}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"daily_milk_quantity\",children:\"Daily Milk Quantity (L)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"milk_rate_per_liter\",placeholder:\" \",value:formData.milk_rate_per_liter,onChange:handleChange,step:\"0.01\",min:\"0\",className:formData.milk_rate_per_liter?'has-value':''}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"milk_rate_per_liter\",children:\"Milk Rate per Liter (\\u20B9)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"shift\",value:formData.shift,onChange:handleChange,className:formData.shift?'has-value':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Shift\"}),/*#__PURE__*/_jsx(\"option\",{value:\"morning\",children:\"Morning\"}),/*#__PURE__*/_jsx(\"option\",{value:\"evening\",children:\"Evening\"}),/*#__PURE__*/_jsx(\"option\",{value:\"occasional\",children:\"Occasional\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"shift\",children:\"Shift\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:formData.status,onChange:handleChange,className:formData.status?'has-value':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactive\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"status\",children:\"Status\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",children:[editingId?'Update':'Add',\" Customer\"]}),editingId&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setEditingId(null);setFormData({name:'',phone:'',address:'',daily_milk_quantity:'',milk_rate_per_liter:'',shift:'morning',status:'active'});},children:\"Cancel\"}),editingId&&/*#__PURE__*/_jsxs(\"div\",{className:\"customer-actions\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Special Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Long Leave\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"leave-start-\".concat(editingId),placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"leave-start-\".concat(editingId),children:\"Start Date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"leave-end-\".concat(editingId),placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"leave-end-\".concat(editingId),children:\"End Date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"leave-reason-\".concat(editingId),placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"leave-reason-\".concat(editingId),children:\"Reason (optional)\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{const startDate=document.getElementById(\"leave-start-\".concat(editingId)).value;const endDate=document.getElementById(\"leave-end-\".concat(editingId)).value;const reason=document.getElementById(\"leave-reason-\".concat(editingId)).value;if(startDate&&endDate){addLongLeave(editingId,startDate,endDate,reason);alert('Long leave recorded successfully!');document.getElementById(\"leave-start-\".concat(editingId)).value='';document.getElementById(\"leave-end-\".concat(editingId)).value='';document.getElementById(\"leave-reason-\".concat(editingId)).value='';}else{alert('Please enter both start and end dates');}},children:\"Record Long Leave\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Long Extra Milk\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"extra-start-\".concat(editingId),placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"extra-start-\".concat(editingId),children:\"Start Date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"extra-end-\".concat(editingId),placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"extra-end-\".concat(editingId),children:\"End Date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",id:\"extra-qty-\".concat(editingId),placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"extra-qty-\".concat(editingId),children:\"Daily Extra Qty (L)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"extra-reason-\".concat(editingId),placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"extra-reason-\".concat(editingId),children:\"Reason (optional)\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{const startDate=document.getElementById(\"extra-start-\".concat(editingId)).value;const endDate=document.getElementById(\"extra-end-\".concat(editingId)).value;const dailyQty=document.getElementById(\"extra-qty-\".concat(editingId)).value;const reason=document.getElementById(\"extra-reason-\".concat(editingId)).value;if(startDate&&endDate&&dailyQty){addLongExtraMilk(editingId,startDate,endDate,parseFloat(dailyQty),reason);alert('Long extra milk recorded successfully!');document.getElementById(\"extra-start-\".concat(editingId)).value='';document.getElementById(\"extra-end-\".concat(editingId)).value='';document.getElementById(\"extra-qty-\".concat(editingId)).value='';document.getElementById(\"extra-reason-\".concat(editingId)).value='';}else{alert('Please enter start date, end date, and daily quantity');}},children:\"Record Long Extra Milk\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"customer-list\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Customer List (\",customers.length,\")\"]}),customers.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No customers added yet.\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"customer-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Shift\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Daily Qty (L)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Rate (\\u20B9/L)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:customers.map(customer=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:customer.name}),/*#__PURE__*/_jsx(\"td\",{children:customer.phone}),/*#__PURE__*/_jsx(\"td\",{children:customer.address}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"shift-badge \".concat(customer.shift),children:customer.shift.charAt(0).toUpperCase()+customer.shift.slice(1)})}),/*#__PURE__*/_jsx(\"td\",{children:customer.daily_milk_quantity}),/*#__PURE__*/_jsx(\"td\",{children:customer.milk_rate_per_liter}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(customer.status),children:customer.status.charAt(0).toUpperCase()+customer.status.slice(1)})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(customer.created_at).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn edit-btn\",onClick:()=>handleEdit(customer),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn delete-btn\",onClick:()=>handleDelete(customer.id),children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn bill-btn\",onClick:()=>generateBill(customer.id),children:\"Generate Bill\"})]})]},customer.id))})]})]})]}),activeTab==='deliveries'&&/*#__PURE__*/_jsxs(\"div\",{className:\"deliveries-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Delivery Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-controls\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Date:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:e=>setSelectedDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Shift:\",/*#__PURE__*/_jsxs(\"select\",{value:selectedShift,onChange:e=>setSelectedShift(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Shifts\"}),/*#__PURE__*/_jsx(\"option\",{value:\"morning\",children:\"Morning\"}),/*#__PURE__*/_jsx(\"option\",{value:\"evening\",children:\"Evening\"}),/*#__PURE__*/_jsx(\"option\",{value:\"occasional\",children:\"Occasional\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-summary\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Delivery Summary for \",new Date(selectedDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card delivered\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u2705 Delivered\"}),/*#__PURE__*/_jsx(\"p\",{children:getDeliveriesForDate().filter(d=>d.delivered&&!d.leave).length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card pending\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u23F3 Pending\"}),/*#__PURE__*/_jsx(\"p\",{children:getCustomersByShift(selectedShift).length-getDeliveriesForDate().filter(d=>d.delivered||d.leave).length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card leave\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83C\\uDFD6\\uFE0F On Leave\"}),/*#__PURE__*/_jsx(\"p\",{children:getDeliveriesForDate().filter(d=>d.leave).length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card total\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDC65 Total\"}),/*#__PURE__*/_jsx(\"p\",{children:getCustomersByShift(selectedShift).length})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u2705 Delivered (\",getDeliveriesForDate().filter(d=>d.delivered&&!d.leave).length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"delivery-grid\",children:getDeliveriesForDate().filter(d=>d.delivered&&!d.leave).map(delivery=>{const customer=customers.find(c=>c.id===delivery.customer_id);return/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-card delivered\",children:[/*#__PURE__*/_jsx(\"h4\",{children:(customer===null||customer===void 0?void 0:customer.name)||'Unknown Customer'}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Phone: \",(customer===null||customer===void 0?void 0:customer.phone)||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Delivered: \",delivery.delivered_quantity,\"L\"]}),delivery.delivered_quantity!==(customer===null||customer===void 0?void 0:customer.default_milk_quantity)&&/*#__PURE__*/_jsxs(\"p\",{className:\"quantity-note\",children:[\"Scheduled: \",customer===null||customer===void 0?void 0:customer.default_milk_quantity,\"L\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"delivery-status delivered\",children:\"Status: Delivered\"})]},delivery.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u23F3 Pending (\",getCustomersByShift(selectedShift).length-getDeliveriesForDate().filter(d=>d.delivered||d.leave).length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"delivery-grid\",children:getCustomersByShift(selectedShift).filter(customer=>{const delivery=deliveries.find(d=>d.customer_id===customer.id&&d.date===selectedDate);return!delivery||!delivery.delivered&&!delivery.leave;}).map(customer=>/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-card pending\",children:[/*#__PURE__*/_jsx(\"h4\",{children:customer.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Phone: \",customer.phone]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Default: \",customer.default_milk_quantity,\"L\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>markDelivery(customer,selectedDate,customer.default_milk_quantity),className:\"btn-delivered\",children:\"Mark Delivered\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>markLeave(customer,selectedDate),className:\"btn-leave\",children:\"Mark Leave\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"extra-milk-control\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Extra milk (L)\",min:\"0\",step:\"0.1\",onKeyDown:e=>{if(e.key==='Enter'){const extraQty=e.target.value;if(extraQty){addExtraMilk(customer,selectedDate,extraQty);}}}}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{const input=e.target.previousElementSibling;if(input.value){addExtraMilk(customer,selectedDate,input.value);input.value='';}},children:\"Add Extra\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"override-control\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Override qty (L)\",min:\"0\",step:\"0.1\",onKeyDown:e=>{if(e.key==='Enter'){const newQty=e.target.value;if(newQty){overrideDefaultQuantity(customer,selectedDate,newQty);}}}}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{const input=e.target.previousElementSibling;if(input.value){overrideDefaultQuantity(customer,selectedDate,input.value);input.value='';}},children:\"Override\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"delivery-status pending\",children:\"Status: Pending\"})]},customer.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83C\\uDFD6\\uFE0F On Leave (\",getDeliveriesForDate().filter(d=>d.leave).length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"delivery-grid\",children:getDeliveriesForDate().filter(d=>d.leave).map(delivery=>{const customer=customers.find(c=>c.id===delivery.customer_id);return/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-card leave\",children:[/*#__PURE__*/_jsx(\"h4\",{children:(customer===null||customer===void 0?void 0:customer.name)||'Unknown Customer'}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Phone: \",(customer===null||customer===void 0?void 0:customer.phone)||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Leave Date: \",delivery.date]}),/*#__PURE__*/_jsx(\"div\",{className:\"delivery-status leave\",children:\"Status: On Leave\"})]},delivery.id);})})]})]}),activeTab==='bills'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bills-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Bill Management\"}),bills.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No bills generated yet.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"monthly-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Monthly Summary\"}),Object.entries(bills.reduce((acc,bill)=>{const monthYear=\"\".concat(bill.bill_year,\"-\").concat(bill.bill_month.toString().padStart(2,'0'));if(!acc[monthYear]){acc[monthYear]={totalQuantity:0,totalAmount:0,billCount:0};}acc[monthYear].totalQuantity+=bill.total_quantity;acc[monthYear].totalAmount+=bill.total_amount;acc[monthYear].billCount+=1;return acc;},{})).map(_ref=>{let[monthYear,data]=_ref;const[year,month]=monthYear.split('-');const monthNames=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];return/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[monthNames[parseInt(month)-1],\" \",year]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Quantity:\"}),\" \",data.totalQuantity.toFixed(2),\" L\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Amount:\"}),\" \\u20B9\",data.totalAmount.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Bills Count:\"}),\" \",data.billCount]})]},monthYear);})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"bills-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Month/Year\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity (L)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Amount (\\u20B9)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Balance (\\u20B9)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date Generated\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Payment\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bills.map(bill=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:bill.customer_name}),/*#__PURE__*/_jsxs(\"td\",{children:[bill.bill_month,\"/\",bill.bill_year]}),/*#__PURE__*/_jsx(\"td\",{children:bill.total_quantity.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:bill.total_amount.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:bill.balance>0?'balance-owing':'balance-paid',children:bill.balance.toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:new Date(bill.bill_generated_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:bill.payment_date?new Date(bill.payment_date).toLocaleDateString():'No payment yet'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(bill.paid?'paid':'unpaid'),children:bill.paid?'Paid':'Unpaid'})}),/*#__PURE__*/_jsxs(\"td\",{children:[!bill.paid&&/*#__PURE__*/_jsxs(\"div\",{className:\"payment-controls\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Amount Paid\",min:\"0\",step:\"0.01\",className:\"payment-input\",onKeyDown:e=>{if(e.key==='Enter'){const amount=e.target.value;if(amount){handleBillPayment(bill.id,amount);}}}}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{const amountInput=e.target.previousElementSibling;const amount=amountInput.value;if(amount){handleBillPayment(bill.id,amount);amountInput.value='';}},className:\"pay-btn\",children:\"Pay\"})]}),bill.paid&&bill.last_payment_change>0&&/*#__PURE__*/_jsx(\"div\",{className:\"payment-change-info\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"Change: \\u20B9\",bill.last_payment_change.toFixed(2)]})}),bill.credit_applied>0&&/*#__PURE__*/_jsx(\"div\",{className:\"credit-applied-info\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"Credit Applied: -\\u20B9\",bill.credit_applied.toFixed(2)]})})]})]},bill.id))})]})]})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","securityQuestions","question","answer","App","isAuthenticated","setIsAuthenticated","securityAnswer","setSecurityAnswer","currentQuestion","setCurrentQuestion","usedQuestions","setUsedQuestions","showSecurityScreen","setShowSecurityScreen","customers","setCustomers","deliveries","setDeliveries","bills","setBills","payments","setPayments","longLeaves","setLongLeaves","longExtraMilk","setLongExtraMilk","credits","setCredits","activeTab","setActiveTab","selectedSession","setSelectedSession","getRandomQuestion","availableQuestions","filter","q","includes","length","Math","floor","random","randomQuestion","prev","handleSecurityAnswerChange","value","toLowerCase","trim","submitSecurityAnswer","correctAnswer","setTimeout","alert","concat","resetSecurity","addLongLeave","customerId","startDate","endDate","reason","arguments","undefined","customer","find","c","id","newLongLeave","Date","now","customer_id","customer_name","name","start_date","end_date","created_at","toISOString","start","end","date","dateString","split","markLeave","setDate","getDate","calculateDaysBetweenDates","addLongExtraMilk","dailyExtraQty","newLongExtraMilk","daily_extra_quantity","parseFloat","totalExtraLiters","addExtraMilk","toFixed","timeDifference","getTime","ceil","formData","setFormData","phone","address","daily_milk_quantity","milk_rate_per_liter","shift","status","editingId","setEditingId","selectedShift","setSelectedShift","selectedDate","setSelectedDate","savedCustomers","localStorage","getItem","savedDeliveries","savedBills","savedPayments","JSON","parse","setItem","stringify","handleChange","e","_objectSpread","target","handleSubmit","preventDefault","map","updated_at","newCustomer","default_milk_quantity","existingCustomer","handleEdit","handleDelete","window","confirm","d","b","generateBill","previousUnpaidBills","paid","bill_month","getMonth","bill_year","getFullYear","outstandingBalance","reduce","sum","bill","balance","total_amount","today","newBill","total_quantity","bill_generated_at","sent_to_customer","payment_date","amount_paid","outstanding_balance","handleBillPayment","billId","amountPaid","paymentAmount","currentBalance","changeAmount","newPayment","bill_id","change_given","payment_method","is_partial","is_full_with_change","change_amount","updatedBill","last_payment_change","applyChangeToNextMonthBill","newAmountPaid","newBalance","currentMonth","currentYear","nextMonth","nextYear","nextMonthBill","max","newTotalAmount","credit_applied","creditRecord","credit_amount","applied_date","description","getMonthName","monthNum","monthNames","addCustomerCredit","amount","credit_balance","last_credit_added","applyOverpaymentToCustomerBills","overpaymentAmount","currentBillId","customerUnpaidBills","sort","a","remainingOverpayment","amountToApply","min","newBillBalance","isFullyPaid","appliedPayment","is_credit_from_overpayment","original_overpayment_source","prevBills","handlePartialPayment","changeGiven","overpayment","applyOverpaymentToFutureBills","getCustomersByShift","markDelivery","deliveredQty","session","existingDelivery","delivered_quantity","delivered","leave","newDelivery","scheduled_quantity","delivery_shift","extraQty","newDeliveredQty","extra_milk","overrideDefaultQuantity","newQty","quantity_overridden","getDeliveriesForDate","filteredDeliveries","className","children","type","placeholder","onChange","onKeyPress","key","autoFocus","onClick","onSubmit","required","htmlFor","step","document","getElementById","dailyQty","charAt","toUpperCase","slice","toLocaleDateString","delivery","onKeyDown","input","previousElementSibling","Object","entries","acc","monthYear","toString","padStart","totalQuantity","totalAmount","billCount","_ref","data","year","month","parseInt","amountInput"],"sources":["E:/Milk_management/milk-management-frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\n\n// Security questions and answers\nconst securityQuestions = [\n  { question: \"Babu lakae Babu (fire symbol)\", answer: \"jaibabu\" },\n  { question: \"Cult classic\", answer: \"khaleja\" },\n  { question: \"Awaiting for?\", answer: \"varanasi\" },\n  { question: \"Shaked thing\", answer: \"businessman\" }\n];\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [securityAnswer, setSecurityAnswer] = useState('');\n  const [currentQuestion, setCurrentQuestion] = useState(null);\n  const [usedQuestions, setUsedQuestions] = useState([]);\n  const [showSecurityScreen, setShowSecurityScreen] = useState(true);\n  const [customers, setCustomers] = useState([]);\n  const [deliveries, setDeliveries] = useState([]);\n  const [bills, setBills] = useState([]);\n  const [payments, setPayments] = useState([]); // Track payments\n  const [longLeaves, setLongLeaves] = useState([]); // Track long leaves\n  const [longExtraMilk, setLongExtraMilk] = useState([]); // Track long extra milk\n  const [credits, setCredits] = useState([]); // Track customer credits\n  const [activeTab, setActiveTab] = useState('customers');\n  const [selectedSession, setSelectedSession] = useState('morning'); // Track delivery session\n\n  // Security functions\n  const getRandomQuestion = () => {\n    const availableQuestions = securityQuestions.filter(\n      q => !usedQuestions.includes(q.question)\n    );\n\n    if (availableQuestions.length === 0) {\n      // If all questions have been used, reset the used list\n      setUsedQuestions([]);\n      return securityQuestions[Math.floor(Math.random() * securityQuestions.length)];\n    }\n\n    const randomQuestion = availableQuestions[Math.floor(Math.random() * availableQuestions.length)];\n    setCurrentQuestion(randomQuestion);\n    setUsedQuestions(prev => [...prev, randomQuestion.question]);\n    return randomQuestion;\n  };\n\n  const handleSecurityAnswerChange = (value) => {\n    setSecurityAnswer(value.toLowerCase().trim());\n  };\n\n  const submitSecurityAnswer = () => {\n    if (!currentQuestion) {\n      getRandomQuestion();\n      return;\n    }\n\n    const correctAnswer = currentQuestion.answer.toLowerCase();\n\n    if (securityAnswer === correctAnswer) {\n      // Successfully answered, check if we've reached the required number of questions\n      if (usedQuestions.length >= 1) { // Just one question for now\n        setIsAuthenticated(true);\n        setShowSecurityScreen(false);\n      } else {\n        // Get another random question\n        setTimeout(() => {\n          setSecurityAnswer('');\n          getRandomQuestion();\n        }, 500);\n      }\n    } else {\n      alert(`Incorrect answer for: \"${currentQuestion.question}\"`);\n      // Reset and show a new random question\n      setSecurityAnswer('');\n      setUsedQuestions([]);\n      getRandomQuestion();\n    }\n  };\n\n  const resetSecurity = () => {\n    setSecurityAnswer('');\n    setCurrentQuestion(null);\n    setUsedQuestions([]);\n    setShowSecurityScreen(true);\n    setTimeout(() => {\n      getRandomQuestion();\n    }, 100);\n  };\n\n  // Initialize with a random question when security screen is shown\n  useEffect(() => {\n    if (showSecurityScreen && !currentQuestion) {\n      setTimeout(() => {\n        getRandomQuestion();\n      }, 100);\n    }\n  }, [showSecurityScreen]);\n\n  // Long leave functions\n  const addLongLeave = (customerId, startDate, endDate, reason = '') => {\n    const customer = customers.find(c => c.id === customerId);\n    if (!customer) return;\n\n    const newLongLeave = {\n      id: Date.now(),\n      customer_id: customerId,\n      customer_name: customer.name,\n      start_date: startDate,\n      end_date: endDate,\n      reason: reason,\n      created_at: new Date().toISOString()\n    };\n\n    setLongLeaves([...longLeaves, newLongLeave]);\n\n    // Also add individual leave records for each day in the range\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const date = new Date(start);\n\n    while (date <= end) {\n      const dateString = date.toISOString().split('T')[0];\n      markLeave(customer, dateString);\n      date.setDate(date.getDate() + 1);\n    }\n\n    alert(`${customer.name} marked for leave from ${startDate} to ${endDate}. Total days: ${calculateDaysBetweenDates(startDate, endDate)}.`);\n  };\n\n  // Long extra milk functions\n  const addLongExtraMilk = (customerId, startDate, endDate, dailyExtraQty, reason = '') => {\n    const customer = customers.find(c => c.id === customerId);\n    if (!customer) return;\n\n    const newLongExtraMilk = {\n      id: Date.now(),\n      customer_id: customerId,\n      customer_name: customer.name,\n      start_date: startDate,\n      end_date: endDate,\n      daily_extra_quantity: parseFloat(dailyExtraQty),\n      reason: reason,\n      created_at: new Date().toISOString()\n    };\n\n    setLongExtraMilk([...longExtraMilk, newLongExtraMilk]);\n\n    // Also add individual extra milk records for each day in the range\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const date = new Date(start);\n    let totalExtraLiters = 0;\n\n    while (date <= end) {\n      const dateString = date.toISOString().split('T')[0];\n      addExtraMilk(customer, dateString, dailyExtraQty);\n      totalExtraLiters += parseFloat(dailyExtraQty);\n      date.setDate(date.getDate() + 1);\n    }\n\n    alert(`${customer.name} scheduled for extra ${dailyExtraQty}L daily from ${startDate} to ${endDate}. Total extra: ${totalExtraLiters.toFixed(2)}L.`);\n  };\n\n  // Helper function to calculate days between two dates\n  const calculateDaysBetweenDates = (startDate, endDate) => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const timeDifference = end.getTime() - start.getTime();\n    return Math.ceil(timeDifference / (1000 * 3600 * 24)) + 1; // +1 to include both start and end dates\n  };\n\n  const [formData, setFormData] = useState({\n    name: '',\n    phone: '',\n    address: '',\n    daily_milk_quantity: '',\n    milk_rate_per_liter: '',\n    shift: 'morning', // morning, evening, occasional\n    status: 'active' // active, inactive\n  });\n  const [editingId, setEditingId] = useState(null);\n  const [selectedShift, setSelectedShift] = useState('all'); // For delivery view\n  const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]); // For delivery view\n\n  // Load data from localStorage on component mount\n  useEffect(() => {\n    const savedCustomers = localStorage.getItem('milk_customers');\n    const savedDeliveries = localStorage.getItem('milk_deliveries');\n    const savedBills = localStorage.getItem('milk_bills');\n    const savedPayments = localStorage.getItem('milk_payments');\n\n    if (savedCustomers) setCustomers(JSON.parse(savedCustomers));\n    if (savedDeliveries) setDeliveries(JSON.parse(savedDeliveries));\n    if (savedBills) setBills(JSON.parse(savedBills));\n    if (savedPayments) setPayments(JSON.parse(savedPayments));\n  }, []);\n\n  // Save data to localStorage whenever state changes\n  useEffect(() => {\n    localStorage.setItem('milk_customers', JSON.stringify(customers));\n  }, [customers]);\n\n  useEffect(() => {\n    localStorage.setItem('milk_deliveries', JSON.stringify(deliveries));\n  }, [deliveries]);\n\n  useEffect(() => {\n    localStorage.setItem('milk_bills', JSON.stringify(bills));\n  }, [bills]);\n\n  useEffect(() => {\n    localStorage.setItem('milk_payments', JSON.stringify(payments));\n  }, [payments]);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (editingId) {\n      // Update existing customer\n      setCustomers(customers.map(c =>\n        c.id === editingId ? {\n          ...formData,\n          id: editingId,\n          updated_at: new Date().toISOString()\n        } : c\n      ));\n      setEditingId(null);\n    } else {\n      // Add new customer\n      const newCustomer = {\n        ...formData,\n        id: Date.now(), // Simple ID generation\n        daily_milk_quantity: parseFloat(formData.daily_milk_quantity) || 0,\n        milk_rate_per_liter: parseFloat(formData.milk_rate_per_liter) || 0,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n        default_milk_quantity: parseFloat(formData.daily_milk_quantity) || 0 // Store default quantity\n      };\n\n      // Check for duplicate phone numbers only if phone is provided\n      if (formData.phone) {\n        const existingCustomer = customers.find(c => c.phone === formData.phone);\n        if (existingCustomer) {\n          alert('Phone number already exists!');\n          return;\n        }\n      }\n\n      setCustomers([...customers, newCustomer]);\n    }\n\n    // Reset form\n    setFormData({\n      name: '',\n      phone: '',\n      address: '',\n      daily_milk_quantity: '',\n      milk_rate_per_liter: '',\n      shift: 'morning',\n      status: 'active'\n    });\n  };\n\n  const handleEdit = (customer) => {\n    setFormData({\n      name: customer.name,\n      phone: customer.phone,\n      address: customer.address,\n      daily_milk_quantity: customer.daily_milk_quantity,\n      milk_rate_per_liter: customer.milk_rate_per_liter,\n      shift: customer.shift || 'morning',\n      status: customer.status || 'active'\n    });\n    setEditingId(customer.id);\n  };\n\n  const handleDelete = (id) => {\n    if (window.confirm('Are you sure you want to delete this customer?')) {\n      setCustomers(customers.filter(c => c.id !== id));\n      // Also remove related deliveries and bills\n      setDeliveries(deliveries.filter(d => d.customer_id !== id));\n      setBills(bills.filter(b => b.customer_id !== id));\n    }\n  };\n\n  // Function to generate bill with balance calculation\n  const generateBill = (customerId) => {\n    const customer = customers.find(c => c.id === customerId);\n    if (!customer) return;\n\n    // Calculate any outstanding balance from previous bills\n    const previousUnpaidBills = bills.filter(b =>\n      b.customer_id === customerId &&\n      !b.paid &&\n      !(b.bill_month === new Date().getMonth() + 1 && b.bill_year === new Date().getFullYear())\n    );\n\n    const outstandingBalance = previousUnpaidBills.reduce((sum, bill) => sum + (bill.balance || bill.total_amount), 0);\n\n    const today = new Date();\n    const newBill = {\n      id: Date.now(),\n      customer_id: customerId,\n      customer_name: customer.name,\n      bill_month: today.getMonth() + 1,\n      bill_year: today.getFullYear(),\n      total_quantity: customer.daily_milk_quantity * 30, // Assuming 30 days\n      total_amount: parseFloat((customer.daily_milk_quantity * 30 * customer.milk_rate_per_liter).toFixed(2)),\n      bill_generated_at: today.toISOString(),\n      sent_to_customer: false,\n      paid: false,\n      payment_date: null,\n      amount_paid: 0,\n      balance: parseFloat((customer.daily_milk_quantity * 30 * customer.milk_rate_per_liter + outstandingBalance).toFixed(2)),\n      outstanding_balance: outstandingBalance\n    };\n\n    setBills([...bills, newBill]);\n    alert(`Bill generated for ${customer.name} - Amount: ${newBill.balance.toFixed(2)} (includes ${outstandingBalance.toFixed(2)} outstanding)`);\n  };\n\n  // Function to handle bill payment with cross-month change handling\n  const handleBillPayment = (billId, amountPaid) => {\n    if (parseFloat(amountPaid) <= 0) {\n      alert('Please enter a valid payment amount');\n      return;\n    }\n\n    const bill = bills.find(b => b.id === billId);\n    if (!bill) return;\n\n    const paymentAmount = parseFloat(amountPaid);\n    const currentBalance = bill.balance;\n    const changeAmount = paymentAmount - currentBalance;\n\n    if (paymentAmount >= currentBalance) {\n      // Full payment or overpayment\n      const newPayment = {\n        id: Date.now(),\n        bill_id: billId,\n        customer_id: bill.customer_id,\n        amount_paid: currentBalance, // Only pay the balance amount\n        change_given: changeAmount, // Show the change given\n        payment_date: new Date().toISOString(),\n        payment_method: 'cash',\n        created_at: new Date().toISOString(),\n        is_partial: false,\n        is_full_with_change: changeAmount > 0,\n        change_amount: changeAmount\n      };\n\n      setPayments([...payments, newPayment]);\n\n      // Update the current bill as fully paid\n      const updatedBill = {\n        ...bill,\n        paid: true,\n        amount_paid: (bill.amount_paid || 0) + currentBalance,\n        balance: 0,\n        payment_date: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n        last_payment_change: changeAmount > 0 ? changeAmount : 0 // Track change given\n      };\n\n      setBills(bills.map(b => b.id === billId ? updatedBill : b));\n\n      // If there's overpayment (change), apply it to the next month's bill\n      if (changeAmount > 0) {\n        applyChangeToNextMonthBill(bill.customer_id, changeAmount, bill.bill_month, bill.bill_year);\n        alert(`Bill paid successfully! Change given: ${changeAmount.toFixed(2)} (applied to next month's bill)`);\n      } else {\n        alert('Bill paid successfully!');\n      }\n    } else {\n      // Partial payment\n      const newAmountPaid = (bill.amount_paid || 0) + paymentAmount;\n      const newBalance = parseFloat((currentBalance - paymentAmount).toFixed(2));\n\n      const newPayment = {\n        id: Date.now(),\n        bill_id: billId,\n        customer_id: bill.customer_id,\n        amount_paid: paymentAmount,\n        change_given: 0, // No change for partial payments\n        payment_date: new Date().toISOString(),\n        payment_method: 'partial',\n        created_at: new Date().toISOString(),\n        is_partial: true\n      };\n\n      setPayments([...payments, newPayment]);\n\n      // Update the bill with new balance\n      const updatedBill = {\n        ...bill,\n        amount_paid: newAmountPaid,\n        balance: newBalance,\n        payment_date: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n\n      setBills(bills.map(b => b.id === billId ? updatedBill : b));\n\n      alert(`Partial payment of ${paymentAmount.toFixed(2)} received. Remaining balance: ${newBalance.toFixed(2)}`);\n    }\n  };\n\n  // Function to apply change to next month's bill\n  const applyChangeToNextMonthBill = (customerId, changeAmount, currentMonth, currentYear) => {\n    // Calculate next month and year\n    let nextMonth = currentMonth + 1;\n    let nextYear = currentYear;\n\n    if (nextMonth > 12) {\n      nextMonth = 1;\n      nextYear = currentYear + 1;\n    }\n\n    // Find the next month's bill for this customer\n    const nextMonthBill = bills.find(b =>\n      b.customer_id === customerId &&\n      b.bill_month === nextMonth &&\n      b.bill_year === nextYear\n    );\n\n    if (nextMonthBill && !nextMonthBill.paid) {\n      // Apply the change to reduce the next month's balance\n      const newBalance = Math.max(0, nextMonthBill.balance - changeAmount);\n      const newTotalAmount = Math.max(0, nextMonthBill.total_amount - changeAmount);\n\n      setBills(bills.map(b =>\n        b.id === nextMonthBill.id\n          ? {\n              ...b,\n              balance: newBalance,\n              total_amount: newTotalAmount,\n              updated_at: new Date().toISOString(),\n              credit_applied: (b.credit_applied || 0) + changeAmount\n            }\n          : b\n      ));\n\n      // Create a credit application record\n      const creditRecord = {\n        id: Date.now(),\n        bill_id: nextMonthBill.id,\n        customer_id: customerId,\n        credit_amount: changeAmount,\n        applied_date: new Date().toISOString(),\n        description: `Credit from overpayment in ${getMonthName(currentMonth)} ${currentYear}`\n      };\n\n      setCredits(prev => [...prev, creditRecord]);\n    } else {\n      // If no next month bill exists, create a credit record for future use\n      const creditRecord = {\n        id: Date.now(),\n        customer_id: customerId,\n        credit_amount: changeAmount,\n        applied_date: new Date().toISOString(),\n        description: `Credit from overpayment in ${getMonthName(currentMonth)} ${currentYear}`,\n        status: 'pending' // Will be applied when next bill is generated\n      };\n\n      setCredits(prev => [...prev, creditRecord]);\n    }\n  };\n\n  // Helper function to get month name\n  const getMonthName = (monthNum) => {\n    const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n      \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    return monthNames[monthNum - 1] || '';\n  };\n\n  // Function to add customer credit\n  const addCustomerCredit = (customerId, amount) => {\n    // Find the customer\n    const customer = customers.find(c => c.id === customerId);\n    if (!customer) return;\n\n    // Update customer with credit information\n    setCustomers(customers.map(c =>\n      c.id === customerId\n        ? {\n            ...c,\n            credit_balance: (c.credit_balance || 0) + amount,\n            last_credit_added: new Date().toISOString()\n          }\n        : c\n    ));\n  };\n\n  // Function to apply overpayment to customer's future bills\n  const applyOverpaymentToCustomerBills = (customerId, overpaymentAmount, currentBillId) => {\n    // Find unpaid bills for this customer (excluding current bill)\n    const customerUnpaidBills = bills\n      .filter(b =>\n        b.customer_id === customerId &&\n        !b.paid &&\n        b.id !== currentBillId\n      )\n      .sort((a, b) => new Date(a.bill_generated_at) - new Date(b.bill_generated_at)); // Sort by oldest first\n\n    let remainingOverpayment = overpaymentAmount;\n\n    for (const bill of customerUnpaidBills) {\n      if (remainingOverpayment <= 0) break;\n\n      const amountToApply = Math.min(remainingOverpayment, bill.balance);\n      const newBillBalance = parseFloat((bill.balance - amountToApply).toFixed(2));\n      const isFullyPaid = newBillBalance <= 0;\n\n      // Create a payment record for the applied amount\n      const appliedPayment = {\n        id: Date.now() + Math.random(), // Unique ID\n        bill_id: bill.id,\n        customer_id: customerId,\n        amount_paid: amountToApply,\n        change_given: 0, // No change for applied payments\n        payment_date: new Date().toISOString(),\n        payment_method: 'credit_from_overpayment',\n        created_at: new Date().toISOString(),\n        is_credit_from_overpayment: true,\n        original_overpayment_source: currentBillId\n      };\n\n      setPayments(prev => [...prev, appliedPayment]);\n\n      // Update the bill\n      setBills(prevBills => prevBills.map(b =>\n        b.id === bill.id\n          ? {\n              ...b,\n              paid: isFullyPaid,\n              amount_paid: (b.amount_paid || 0) + amountToApply,\n              balance: newBillBalance,\n              payment_date: isFullyPaid ? new Date().toISOString() : b.payment_date,\n              updated_at: new Date().toISOString()\n            }\n          : b\n      ));\n\n      remainingOverpayment = parseFloat((remainingOverpayment - amountToApply).toFixed(2));\n    }\n\n    if (remainingOverpayment > 0) {\n      // If there's still overpayment left, create a credit for the customer\n      alert(`${remainingOverpayment.toFixed(2)} overpayment has been credited to customer account for future bills.`);\n    }\n  };\n\n  // Function to handle partial payment with overpayment support\n  const handlePartialPayment = (billId, amountPaid, changeGiven = 0) => {\n    if (parseFloat(amountPaid) <= 0) {\n      alert('Please enter a valid payment amount');\n      return;\n    }\n\n    const bill = bills.find(b => b.id === billId);\n    if (!bill) return;\n\n    const paymentAmount = parseFloat(amountPaid);\n    const overpayment = paymentAmount - bill.balance;\n\n    if (overpayment > 0) {\n      // Handle overpayment by applying excess to future bills\n      alert(`Overpayment of ${overpayment.toFixed(2)} detected. This will be applied to future bills.`);\n\n      // Apply the full balance to current bill\n      handleBillPayment(billId, bill.balance, changeGiven);\n\n      // Apply remaining amount to future bills\n      applyOverpaymentToCustomerBills(bill.customer_id, overpayment);\n    } else {\n      // Regular payment\n      handleBillPayment(billId, amountPaid, changeGiven);\n    }\n  };\n\n  // Function to apply overpayment to future bills (deprecated - use applyOverpaymentToCustomerBills instead)\n  const applyOverpaymentToFutureBills = (customerId, overpaymentAmount) => {\n    // This function is deprecated. Use applyOverpaymentToCustomerBills instead.\n  };\n\n  // Function to get customers by shift\n  const getCustomersByShift = (shift) => {\n    if (shift === 'all') {\n      return customers.filter(c => c.status === 'active');\n    }\n    return customers.filter(c => c.shift === shift && c.status === 'active');\n  };\n\n  // Function to handle delivery marking with session\n  const markDelivery = (customer, date, deliveredQty, session = 'morning') => {\n    const existingDelivery = deliveries.find(d =>\n      d.customer_id === customer.id && d.date === date && d.session === session\n    );\n\n    if (existingDelivery) {\n      // Update existing delivery\n      setDeliveries(deliveries.map(d =>\n        d.id === existingDelivery.id\n          ? {\n              ...d,\n              delivered_quantity: deliveredQty,\n              delivered: true,\n              leave: false,\n              session: session\n            }\n          : d\n      ));\n    } else {\n      // Create new delivery record\n      const newDelivery = {\n        id: Date.now(),\n        customer_id: customer.id,\n        customer_name: customer.name,\n        date: date,\n        session: session, // Add session information\n        scheduled_quantity: customer.default_milk_quantity,\n        delivered_quantity: deliveredQty,\n        delivered: true,\n        leave: false,\n        delivery_shift: customer.shift,\n        created_at: new Date().toISOString()\n      };\n      setDeliveries([...deliveries, newDelivery]);\n    }\n  };\n\n  // Function to mark a leave with session\n  const markLeave = (customer, date, session = 'morning') => {\n    const existingDelivery = deliveries.find(d =>\n      d.customer_id === customer.id && d.date === date && d.session === session\n    );\n\n    if (existingDelivery) {\n      // Update existing delivery as leave\n      setDeliveries(deliveries.map(d =>\n        d.id === existingDelivery.id\n          ? { ...d, delivered: false, leave: true, session: session }\n          : d\n      ));\n    } else {\n      // Create new delivery record marked as leave\n      const newDelivery = {\n        id: Date.now(),\n        customer_id: customer.id,\n        customer_name: customer.name,\n        date: date,\n        session: session, // Add session information\n        scheduled_quantity: customer.default_milk_quantity,\n        delivered_quantity: 0,\n        delivered: false,\n        leave: true,\n        delivery_shift: customer.shift,\n        created_at: new Date().toISOString()\n      };\n      setDeliveries([...deliveries, newDelivery]);\n    }\n  };\n\n  // Function to handle extra milk addition\n  const addExtraMilk = (customer, date, extraQty) => {\n    const existingDelivery = deliveries.find(d =>\n      d.customer_id === customer.id && d.date === date\n    );\n\n    let newDeliveredQty = customer.default_milk_quantity + parseFloat(extraQty || 0);\n\n    if (existingDelivery) {\n      // Update existing delivery with extra milk\n      setDeliveries(deliveries.map(d =>\n        d.id === existingDelivery.id\n          ? { ...d, delivered_quantity: newDeliveredQty, delivered: true, leave: false }\n          : d\n      ));\n    } else {\n      // Create new delivery record with extra milk\n      const newDelivery = {\n        id: Date.now(),\n        customer_id: customer.id,\n        customer_name: customer.name,\n        date: date,\n        scheduled_quantity: customer.default_milk_quantity,\n        delivered_quantity: newDeliveredQty,\n        delivered: true,\n        leave: false,\n        delivery_shift: customer.shift,\n        extra_milk: parseFloat(extraQty || 0)\n      };\n      setDeliveries([...deliveries, newDelivery]);\n    }\n  };\n\n  // Function to override default quantity for a specific day\n  const overrideDefaultQuantity = (customer, date, newQty) => {\n    const existingDelivery = deliveries.find(d =>\n      d.customer_id === customer.id && d.date === date\n    );\n\n    if (existingDelivery) {\n      // Update existing delivery with overridden quantity\n      setDeliveries(deliveries.map(d =>\n        d.id === existingDelivery.id\n          ? { ...d, delivered_quantity: parseFloat(newQty), delivered: true, leave: false }\n          : d\n      ));\n    } else {\n      // Create new delivery record with overridden quantity\n      const newDelivery = {\n        id: Date.now(),\n        customer_id: customer.id,\n        customer_name: customer.name,\n        date: date,\n        scheduled_quantity: customer.default_milk_quantity,\n        delivered_quantity: parseFloat(newQty),\n        delivered: true,\n        leave: false,\n        delivery_shift: customer.shift,\n        quantity_overridden: true\n      };\n      setDeliveries([...deliveries, newDelivery]);\n    }\n  };\n\n  // Get deliveries for selected date and shift\n  const getDeliveriesForDate = () => {\n    let filteredDeliveries = deliveries.filter(d => d.date === selectedDate);\n\n    if (selectedShift !== 'all') {\n      filteredDeliveries = filteredDeliveries.filter(d => d.delivery_shift === selectedShift);\n    }\n\n    return filteredDeliveries;\n  };\n\n  if (showSecurityScreen) {\n    return (\n      <div className=\"App\">\n        <div className=\"security-screen\">\n          <div className=\"security-container\">\n            <h2>Access Verification</h2>\n            <p>Security Question:</p>\n            <h3>{currentQuestion?.question || 'Loading...'}</h3>\n            <input\n              type=\"text\"\n              placeholder=\"Your answer\"\n              value={securityAnswer}\n              onChange={(e) => handleSecurityAnswerChange(e.target.value)}\n              onKeyPress={(e) => {\n                if (e.key === 'Enter') {\n                  submitSecurityAnswer();\n                }\n              }}\n              autoFocus\n            />\n            <button onClick={submitSecurityAnswer}>Verify Access</button>\n            <p className=\"security-hint\">Answer correctly to access the application</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"app-header\">\n        <h1>Dairy Management System</h1>\n        <button className=\"logout-btn\" onClick={resetSecurity}>Logout</button>\n      </header>\n\n      <nav className=\"tabs\">\n        <button\n          className={activeTab === 'customers' ? 'active' : ''}\n          onClick={() => setActiveTab('customers')}\n        >\n          Customers\n        </button>\n        <button\n          className={activeTab === 'deliveries' ? 'active' : ''}\n          onClick={() => setActiveTab('deliveries')}\n        >\n          Deliveries\n        </button>\n        <button\n          className={activeTab === 'bills' ? 'active' : ''}\n          onClick={() => setActiveTab('bills')}\n        >\n          Bills\n        </button>\n      </nav>\n\n      <main className=\"main-content\">\n        {activeTab === 'customers' && (\n          <div className=\"customers-section\">\n            <form onSubmit={handleSubmit} className=\"customer-form\">\n              <h2>{editingId ? 'Edit Customer' : 'Add New Customer'}</h2>\n\n              <div className=\"input-group\">\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  placeholder=\" \"\n                  value={formData.name}\n                  onChange={handleChange}\n                  required\n                  className={formData.name ? 'has-value' : ''}\n                />\n                <label htmlFor=\"name\">Customer Name</label>\n              </div>\n\n              <div className=\"input-group\">\n                <input\n                  type=\"tel\"\n                  name=\"phone\"\n                  placeholder=\" \"\n                  value={formData.phone}\n                  onChange={handleChange}\n                  className={formData.phone ? 'has-value' : ''}\n                />\n                <label htmlFor=\"phone\">Phone Number (Optional)</label>\n              </div>\n\n              <div className=\"input-group\">\n                <textarea\n                  name=\"address\"\n                  placeholder=\" \"\n                  value={formData.address}\n                  onChange={handleChange}\n                  required\n                  className={formData.address ? 'has-value' : ''}\n                ></textarea>\n                <label htmlFor=\"address\">Address</label>\n              </div>\n\n              <div className=\"input-group\">\n                <input\n                  type=\"number\"\n                  name=\"daily_milk_quantity\"\n                  placeholder=\" \"\n                  value={formData.daily_milk_quantity}\n                  onChange={handleChange}\n                  step=\"0.01\"\n                  min=\"0\"\n                  className={formData.daily_milk_quantity ? 'has-value' : ''}\n                />\n                <label htmlFor=\"daily_milk_quantity\">Daily Milk Quantity (L)</label>\n              </div>\n\n              <div className=\"input-group\">\n                <input\n                  type=\"number\"\n                  name=\"milk_rate_per_liter\"\n                  placeholder=\" \"\n                  value={formData.milk_rate_per_liter}\n                  onChange={handleChange}\n                  step=\"0.01\"\n                  min=\"0\"\n                  className={formData.milk_rate_per_liter ? 'has-value' : ''}\n                />\n                <label htmlFor=\"milk_rate_per_liter\">Milk Rate per Liter ()</label>\n              </div>\n\n              <div className=\"input-group\">\n                <select\n                  name=\"shift\"\n                  value={formData.shift}\n                  onChange={handleChange}\n                  className={formData.shift ? 'has-value' : ''}\n                >\n                  <option value=\"\">Select Shift</option>\n                  <option value=\"morning\">Morning</option>\n                  <option value=\"evening\">Evening</option>\n                  <option value=\"occasional\">Occasional</option>\n                </select>\n                <label htmlFor=\"shift\">Shift</label>\n              </div>\n\n              <div className=\"input-group\">\n                <select\n                  name=\"status\"\n                  value={formData.status}\n                  onChange={handleChange}\n                  className={formData.status ? 'has-value' : ''}\n                >\n                  <option value=\"\">Select Status</option>\n                  <option value=\"active\">Active</option>\n                  <option value=\"inactive\">Inactive</option>\n                </select>\n                <label htmlFor=\"status\">Status</label>\n              </div>\n\n              <button type=\"submit\">{editingId ? 'Update' : 'Add'} Customer</button>\n\n              {editingId && (\n                <button type=\"button\" onClick={() => {\n                  setEditingId(null);\n                  setFormData({\n                    name: '',\n                    phone: '',\n                    address: '',\n                    daily_milk_quantity: '',\n                    milk_rate_per_liter: '',\n                    shift: 'morning',\n                    status: 'active'\n                  });\n                }}>\n                  Cancel\n                </button>\n              )}\n\n              {/* Long Leave and Extra Milk Section for Existing Customers */}\n              {editingId && (\n                <div className=\"customer-actions\">\n                  <h3>Special Actions</h3>\n\n                  <div className=\"action-section\">\n                    <h4>Long Leave</h4>\n                    <div className=\"input-group\">\n                      <input type=\"date\" id={`leave-start-${editingId}`} placeholder=\" \" />\n                      <label htmlFor={`leave-start-${editingId}`}>Start Date</label>\n                    </div>\n                    <div className=\"input-group\">\n                      <input type=\"date\" id={`leave-end-${editingId}`} placeholder=\" \" />\n                      <label htmlFor={`leave-end-${editingId}`}>End Date</label>\n                    </div>\n                    <div className=\"input-group\">\n                      <input type=\"text\" id={`leave-reason-${editingId}`} placeholder=\" \" />\n                      <label htmlFor={`leave-reason-${editingId}`}>Reason (optional)</label>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        const startDate = document.getElementById(`leave-start-${editingId}`).value;\n                        const endDate = document.getElementById(`leave-end-${editingId}`).value;\n                        const reason = document.getElementById(`leave-reason-${editingId}`).value;\n\n                        if (startDate && endDate) {\n                          addLongLeave(editingId, startDate, endDate, reason);\n                          alert('Long leave recorded successfully!');\n                          document.getElementById(`leave-start-${editingId}`).value = '';\n                          document.getElementById(`leave-end-${editingId}`).value = '';\n                          document.getElementById(`leave-reason-${editingId}`).value = '';\n                        } else {\n                          alert('Please enter both start and end dates');\n                        }\n                      }}\n                    >\n                      Record Long Leave\n                    </button>\n                  </div>\n\n                  <div className=\"action-section\">\n                    <h4>Long Extra Milk</h4>\n                    <div className=\"input-group\">\n                      <input type=\"date\" id={`extra-start-${editingId}`} placeholder=\" \" />\n                      <label htmlFor={`extra-start-${editingId}`}>Start Date</label>\n                    </div>\n                    <div className=\"input-group\">\n                      <input type=\"date\" id={`extra-end-${editingId}`} placeholder=\" \" />\n                      <label htmlFor={`extra-end-${editingId}`}>End Date</label>\n                    </div>\n                    <div className=\"input-group\">\n                      <input type=\"number\" step=\"0.1\" id={`extra-qty-${editingId}`} placeholder=\" \" />\n                      <label htmlFor={`extra-qty-${editingId}`}>Daily Extra Qty (L)</label>\n                    </div>\n                    <div className=\"input-group\">\n                      <input type=\"text\" id={`extra-reason-${editingId}`} placeholder=\" \" />\n                      <label htmlFor={`extra-reason-${editingId}`}>Reason (optional)</label>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        const startDate = document.getElementById(`extra-start-${editingId}`).value;\n                        const endDate = document.getElementById(`extra-end-${editingId}`).value;\n                        const dailyQty = document.getElementById(`extra-qty-${editingId}`).value;\n                        const reason = document.getElementById(`extra-reason-${editingId}`).value;\n\n                        if (startDate && endDate && dailyQty) {\n                          addLongExtraMilk(editingId, startDate, endDate, parseFloat(dailyQty), reason);\n                          alert('Long extra milk recorded successfully!');\n                          document.getElementById(`extra-start-${editingId}`).value = '';\n                          document.getElementById(`extra-end-${editingId}`).value = '';\n                          document.getElementById(`extra-qty-${editingId}`).value = '';\n                          document.getElementById(`extra-reason-${editingId}`).value = '';\n                        } else {\n                          alert('Please enter start date, end date, and daily quantity');\n                        }\n                      }}\n                    >\n                      Record Long Extra Milk\n                    </button>\n                  </div>\n                </div>\n              )}\n            </form>\n\n            <div className=\"customer-list\">\n              <h2>Customer List ({customers.length})</h2>\n\n              {customers.length === 0 ? (\n                <p>No customers added yet.</p>\n              ) : (\n                <table className=\"customer-table\">\n                  <thead>\n                    <tr>\n                      <th>Name</th>\n                      <th>Phone</th>\n                      <th>Address</th>\n                      <th>Shift</th>\n                      <th>Daily Qty (L)</th>\n                      <th>Rate (/L)</th>\n                      <th>Status</th>\n                      <th>Created</th>\n                      <th>Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {customers.map(customer => (\n                      <tr key={customer.id}>\n                        <td>{customer.name}</td>\n                        <td>{customer.phone}</td>\n                        <td>{customer.address}</td>\n                        <td>\n                          <span className={`shift-badge ${customer.shift}`}>\n                            {customer.shift.charAt(0).toUpperCase() + customer.shift.slice(1)}\n                          </span>\n                        </td>\n                        <td>{customer.daily_milk_quantity}</td>\n                        <td>{customer.milk_rate_per_liter}</td>\n                        <td>\n                          <span className={`status-badge ${customer.status}`}>\n                            {customer.status.charAt(0).toUpperCase() + customer.status.slice(1)}\n                          </span>\n                        </td>\n                        <td>{new Date(customer.created_at).toLocaleDateString()}</td>\n                        <td>\n                          <button className=\"action-btn edit-btn\" onClick={() => handleEdit(customer)}>Edit</button>\n                          <button className=\"action-btn delete-btn\" onClick={() => handleDelete(customer.id)}>Delete</button>\n                          <button className=\"action-btn bill-btn\" onClick={() => generateBill(customer.id)}>Generate Bill</button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              )}\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'deliveries' && (\n          <div className=\"deliveries-section\">\n            <h2>Delivery Management</h2>\n\n            <div className=\"delivery-controls\">\n              <label>\n                Date:\n                <input\n                  type=\"date\"\n                  value={selectedDate}\n                  onChange={(e) => setSelectedDate(e.target.value)}\n                />\n              </label>\n\n              <label>\n                Shift:\n                <select\n                  value={selectedShift}\n                  onChange={(e) => setSelectedShift(e.target.value)}\n                >\n                  <option value=\"all\">All Shifts</option>\n                  <option value=\"morning\">Morning</option>\n                  <option value=\"evening\">Evening</option>\n                  <option value=\"occasional\">Occasional</option>\n                </select>\n              </label>\n            </div>\n\n            {/* Delivery Summary */}\n            <div className=\"delivery-summary\">\n              <h3>Delivery Summary for {new Date(selectedDate).toLocaleDateString()}</h3>\n              <div className=\"summary-stats\">\n                <div className=\"stat-card delivered\">\n                  <h4> Delivered</h4>\n                  <p>{getDeliveriesForDate().filter(d => d.delivered && !d.leave).length}</p>\n                </div>\n                <div className=\"stat-card pending\">\n                  <h4> Pending</h4>\n                  <p>{getCustomersByShift(selectedShift).length - getDeliveriesForDate().filter(d => d.delivered || d.leave).length}</p>\n                </div>\n                <div className=\"stat-card leave\">\n                  <h4> On Leave</h4>\n                  <p>{getDeliveriesForDate().filter(d => d.leave).length}</p>\n                </div>\n                <div className=\"stat-card total\">\n                  <h4> Total</h4>\n                  <p>{getCustomersByShift(selectedShift).length}</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Delivered Customers Section */}\n            <div className=\"delivery-section\">\n              <h3> Delivered ({getDeliveriesForDate().filter(d => d.delivered && !d.leave).length})</h3>\n              <div className=\"delivery-grid\">\n                {getDeliveriesForDate()\n                  .filter(d => d.delivered && !d.leave)\n                  .map(delivery => {\n                    const customer = customers.find(c => c.id === delivery.customer_id);\n                    return (\n                      <div key={delivery.id} className=\"delivery-card delivered\">\n                        <h4>{customer?.name || 'Unknown Customer'}</h4>\n                        <p>Phone: {customer?.phone || 'N/A'}</p>\n                        <p>Delivered: {delivery.delivered_quantity}L</p>\n                        {delivery.delivered_quantity !== customer?.default_milk_quantity && (\n                          <p className=\"quantity-note\">Scheduled: {customer?.default_milk_quantity}L</p>\n                        )}\n                        <div className=\"delivery-status delivered\">\n                          Status: Delivered\n                        </div>\n                      </div>\n                    );\n                  })}\n              </div>\n            </div>\n\n            {/* Pending Customers Section */}\n            <div className=\"delivery-section\">\n              <h3> Pending ({getCustomersByShift(selectedShift).length - getDeliveriesForDate().filter(d => d.delivered || d.leave).length})</h3>\n              <div className=\"delivery-grid\">\n                {getCustomersByShift(selectedShift)\n                  .filter(customer => {\n                    const delivery = deliveries.find(d =>\n                      d.customer_id === customer.id && d.date === selectedDate\n                    );\n                    return !delivery || (!delivery.delivered && !delivery.leave);\n                  })\n                  .map(customer => (\n                    <div key={customer.id} className=\"delivery-card pending\">\n                      <h4>{customer.name}</h4>\n                      <p>Phone: {customer.phone}</p>\n                      <p>Default: {customer.default_milk_quantity}L</p>\n\n                      <div className=\"delivery-actions\">\n                        <button\n                          onClick={() => markDelivery(customer, selectedDate, customer.default_milk_quantity)}\n                          className=\"btn-delivered\"\n                        >\n                          Mark Delivered\n                        </button>\n\n                        <button\n                          onClick={() => markLeave(customer, selectedDate)}\n                          className=\"btn-leave\"\n                        >\n                          Mark Leave\n                        </button>\n\n                        <div className=\"extra-milk-control\">\n                          <input\n                            type=\"number\"\n                            placeholder=\"Extra milk (L)\"\n                            min=\"0\"\n                            step=\"0.1\"\n                            onKeyDown={(e) => {\n                              if (e.key === 'Enter') {\n                                const extraQty = e.target.value;\n                                if (extraQty) {\n                                  addExtraMilk(customer, selectedDate, extraQty);\n                                }\n                              }\n                            }}\n                          />\n                          <button\n                            onClick={(e) => {\n                              const input = e.target.previousElementSibling;\n                              if (input.value) {\n                                addExtraMilk(customer, selectedDate, input.value);\n                                input.value = '';\n                              }\n                            }}\n                          >\n                            Add Extra\n                          </button>\n                        </div>\n\n                        <div className=\"override-control\">\n                          <input\n                            type=\"number\"\n                            placeholder=\"Override qty (L)\"\n                            min=\"0\"\n                            step=\"0.1\"\n                            onKeyDown={(e) => {\n                              if (e.key === 'Enter') {\n                                const newQty = e.target.value;\n                                if (newQty) {\n                                  overrideDefaultQuantity(customer, selectedDate, newQty);\n                                }\n                              }\n                            }}\n                          />\n                          <button\n                            onClick={(e) => {\n                              const input = e.target.previousElementSibling;\n                              if (input.value) {\n                                overrideDefaultQuantity(customer, selectedDate, input.value);\n                                input.value = '';\n                              }\n                            }}\n                          >\n                            Override\n                          </button>\n                        </div>\n                      </div>\n\n                      <div className=\"delivery-status pending\">\n                        Status: Pending\n                      </div>\n                    </div>\n                  ))}\n              </div>\n            </div>\n\n            {/* On Leave Customers Section */}\n            <div className=\"delivery-section\">\n              <h3> On Leave ({getDeliveriesForDate().filter(d => d.leave).length})</h3>\n              <div className=\"delivery-grid\">\n                {getDeliveriesForDate()\n                  .filter(d => d.leave)\n                  .map(delivery => {\n                    const customer = customers.find(c => c.id === delivery.customer_id);\n                    return (\n                      <div key={delivery.id} className=\"delivery-card leave\">\n                        <h4>{customer?.name || 'Unknown Customer'}</h4>\n                        <p>Phone: {customer?.phone || 'N/A'}</p>\n                        <p>Leave Date: {delivery.date}</p>\n                        <div className=\"delivery-status leave\">\n                          Status: On Leave\n                        </div>\n                      </div>\n                    );\n                  })}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'bills' && (\n          <div className=\"bills-section\">\n            <h2>Bill Management</h2>\n\n            {bills.length === 0 ? (\n              <p>No bills generated yet.</p>\n            ) : (\n              <>\n                {/* Monthly Summary Section */}\n                <div className=\"monthly-summary\">\n                  <h3>Monthly Summary</h3>\n                  {Object.entries(\n                    bills.reduce((acc, bill) => {\n                      const monthYear = `${bill.bill_year}-${bill.bill_month.toString().padStart(2, '0')}`;\n                      if (!acc[monthYear]) {\n                        acc[monthYear] = { totalQuantity: 0, totalAmount: 0, billCount: 0 };\n                      }\n                      acc[monthYear].totalQuantity += bill.total_quantity;\n                      acc[monthYear].totalAmount += bill.total_amount;\n                      acc[monthYear].billCount += 1;\n                      return acc;\n                    }, {})\n                  ).map(([monthYear, data]) => {\n                    const [year, month] = monthYear.split('-');\n                    const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n                      \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n                    return (\n                      <div key={monthYear} className=\"summary-card\">\n                        <h4>{monthNames[parseInt(month) - 1]} {year}</h4>\n                        <p><strong>Total Quantity:</strong> {data.totalQuantity.toFixed(2)} L</p>\n                        <p><strong>Total Amount:</strong> {data.totalAmount.toFixed(2)}</p>\n                        <p><strong>Bills Count:</strong> {data.billCount}</p>\n                      </div>\n                    );\n                  })}\n                </div>\n\n                <table className=\"bills-table\">\n                  <thead>\n                    <tr>\n                      <th>Customer</th>\n                      <th>Month/Year</th>\n                      <th>Quantity (L)</th>\n                      <th>Total Amount ()</th>\n                      <th>Balance ()</th>\n                      <th>Date Generated</th>\n                      <th>Last Payment</th>\n                      <th>Status</th>\n                      <th>Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {bills.map(bill => (\n                      <tr key={bill.id}>\n                        <td>{bill.customer_name}</td>\n                        <td>{bill.bill_month}/{bill.bill_year}</td>\n                        <td>{bill.total_quantity.toFixed(2)}</td>\n                        <td>{bill.total_amount.toFixed(2)}</td>\n                        <td className={bill.balance > 0 ? 'balance-owing' : 'balance-paid'}>\n                          {bill.balance.toFixed(2)}\n                        </td>\n                        <td>{new Date(bill.bill_generated_at).toLocaleDateString()}</td>\n                        <td>\n                          {bill.payment_date\n                            ? new Date(bill.payment_date).toLocaleDateString()\n                            : 'No payment yet'}\n                        </td>\n                        <td>\n                          <span className={`status-badge ${bill.paid ? 'paid' : 'unpaid'}`}>\n                            {bill.paid ? 'Paid' : 'Unpaid'}\n                          </span>\n                        </td>\n                        <td>\n                          {!bill.paid && (\n                            <div className=\"payment-controls\">\n                              <input\n                                type=\"number\"\n                                placeholder=\"Amount Paid\"\n                                min=\"0\"\n                                step=\"0.01\"\n                                className=\"payment-input\"\n                                onKeyDown={(e) => {\n                                  if (e.key === 'Enter') {\n                                    const amount = e.target.value;\n                                    if (amount) {\n                                      handleBillPayment(bill.id, amount);\n                                    }\n                                  }\n                                }}\n                              />\n                              <button\n                                onClick={(e) => {\n                                  const amountInput = e.target.previousElementSibling;\n                                  const amount = amountInput.value;\n\n                                  if (amount) {\n                                    handleBillPayment(bill.id, amount);\n                                    amountInput.value = '';\n                                  }\n                                }}\n                                className=\"pay-btn\"\n                              >\n                                Pay\n                              </button>\n                            </div>\n                          )}\n                          {bill.paid && bill.last_payment_change > 0 && (\n                            <div className=\"payment-change-info\">\n                              <small>Change: {bill.last_payment_change.toFixed(2)}</small>\n                            </div>\n                          )}\n                          {bill.credit_applied > 0 && (\n                            <div className=\"credit-applied-info\">\n                              <small>Credit Applied: -{bill.credit_applied.toFixed(2)}</small>\n                            </div>\n                          )}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </>\n            )}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}